# Weather API Transformer

PHP 8.2+ –¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö –ø—Ä–æ –ø–æ–≥–æ–¥—É –∑ OpenWeatherMap API.

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —á–µ—Ä–µ–∑ Composer:

```bash
composer install
```

2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é:

```bash
cp config.env .env
```

3. –û—Ç—Ä–∏–º–∞–π—Ç–µ API –∫–ª—é—á –∑ [OpenWeatherMap](https://openweathermap.org/api) —Ç–∞ –¥–æ–¥–∞–π—Ç–µ –π–æ–≥–æ –≤ `.env` —Ñ–∞–π–ª:

```
OPENWEATHER_API_KEY=your_api_key_here
```

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –Ø–∫—â–æ API –∫–ª—é—á –Ω–µ–¥—ñ–π—Å–Ω–∏–π –∞–±–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ–π, –¥–æ–¥–∞—Ç–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –≤ —Ç–µ—Å—Ç–æ–≤–∏–π —Ä–µ–∂–∏–º —Ç–∞ –ø–æ–≤–µ—Ä—Ç–∞—î —Ñ–µ–π–∫–æ–≤—ñ –¥–∞–Ω—ñ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É.

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≥–æ–¥–∏ –∑–∞ –º—ñ—Å—Ç–æ–º

```
GET /weather?city=Kyiv&country=UA
```

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≥–æ–¥–∏ –∑–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏

```
GET /weather/coordinates?lat=50.4501&lon=30.5234
```

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–æ–≥–Ω–æ–∑—É –ø–æ–≥–æ–¥–∏ –Ω–∞ –∫—ñ–ª—å–∫–∞ –¥–Ω—ñ–≤

```
GET /weather/forecast?city=Kyiv&days=5
```

### –§—ñ–ª—å—Ç—Ä–∏ —Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏

- `fields` - –≤–∏–±—ñ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –ø–æ–ª—ñ–≤ (—á–µ—Ä–µ–∑ –∫–æ–º—É): `city,temperature,humidity`
- `temperature_unit` - –æ–¥–∏–Ω–∏—Ü—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏: `celsius` (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º) –∞–±–æ `fahrenheit`
- `wind_unit` - –æ–¥–∏–Ω–∏—Ü—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ –≤—ñ—Ç—Ä—É: `m/s` (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º) –∞–±–æ `mph`
- `pressure_unit` - –æ–¥–∏–Ω–∏—Ü—è —Ç–∏—Å–∫—É: `hPa` (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º) –∞–±–æ `inHg`
- `include_computed` - –¥–æ–¥–∞—Ç–∏ –æ–±—á–∏—Å–ª–µ–Ω—ñ –ø–æ–ª—è (–∫–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏, –≤–æ–ª–æ–≥–æ—Å—Ç—ñ, –≤—ñ—Ç—Ä—É)
- `days` - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –¥–Ω—ñ–≤ –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑—É (1-16, —Ç—ñ–ª—å–∫–∏ –¥–ª—è `/weather/forecast`)

### –ü—Ä–∏–∫–ª–∞–¥–∏ –∑–∞–ø–∏—Ç—ñ–≤

```bash
# –ë–∞–∑–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø–æ–≥–æ–¥—É
curl "http://localhost/index.php/weather?city=Kyiv"

# –ü–æ–≥–æ–¥–∞ –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏
curl "http://localhost/index.php/weather?city=Kyiv&fields=city,temperature,humidity&temperature_unit=fahrenheit"

# –ü–æ–≥–æ–¥–∞ –∑–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –∑ –æ–±—á–∏—Å–ª–µ–Ω–∏–º–∏ –ø–æ–ª—è–º–∏
curl "http://localhost/index.php/weather/coordinates?lat=50.4501&lon=30.5234&include_computed=true"

# –ü–æ–≥–æ–¥–∞ –∑ —É—Å—ñ–º–∞ –æ–¥–∏–Ω–∏—Ü—è–º–∏ –≤ –∞–º–µ—Ä–∏–∫–∞–Ω—Å—å–∫—ñ–π —Å–∏—Å—Ç–µ–º—ñ
curl "http://localhost/index.php/weather?city=New York&temperature_unit=fahrenheit&wind_unit=mph&pressure_unit=inHg"

# –ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥–∏ –Ω–∞ 5 –¥–Ω—ñ–≤
curl "http://localhost/index.php/weather/forecast?city=Kyiv&days=5"

# –ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥–∏ –≤ –§–∞—Ä–µ–Ω–≥–µ–π—Ç–∞—Ö
curl "http://localhost/index.php/weather/forecast?city=Kyiv&days=3&temperature_unit=fahrenheit"
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ Config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Config.php          # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–æ–¥–∞—Ç–∫—É
‚îÇ   ‚îú‚îÄ‚îÄ Controllers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WeatherController.php # –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä API
‚îÇ   ‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WeatherData.php     # –ú–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö –ø–æ–≥–æ–¥–∏
‚îÇ   ‚îî‚îÄ‚îÄ Services/
‚îÇ       ‚îú‚îÄ‚îÄ WeatherApiService.php    # –°–µ—Ä–≤—ñ—Å –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ OpenWeatherMap API
‚îÇ       ‚îî‚îÄ‚îÄ WeatherTransformer.php   # –°–µ—Ä–≤—ñ—Å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ logs/                       # –õ–æ–≥–∏ –¥–æ–¥–∞—Ç–∫—É
‚îú‚îÄ‚îÄ composer.json              # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ config.env                 # –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ weather.html               # –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îî‚îÄ‚îÄ index.php                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É
```

## –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- **üåê –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –∫—Ä–∞—Å–∏–≤–∏–π —Ç–∞ –∑—Ä—É—á–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∏–±–æ—Ä—É –º—ñ—Å—Ç–∞ —Ç–∞ –ø–µ—Ä–µ–≥–ª—è–¥—É –ø—Ä–æ–≥–Ω–æ–∑—É
- **üìÖ –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –∫—ñ–ª—å–∫–∞ –¥–Ω—ñ–≤** - –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥–∏ –Ω–∞ 1-16 –¥–Ω—ñ–≤
- **üå°Ô∏è –ì–Ω—É—á–∫—ñ –æ–¥–∏–Ω–∏—Ü—ñ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è** - –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –¶–µ–ª—å—Å—ñ—è —Ç–∞ –§–∞—Ä–µ–Ω–≥–µ–π—Ç–∞
- **PHP 8.2+** –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —Å—É—á–∞—Å–Ω–∏—Ö –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π –º–æ–≤–∏
- **Composer** –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏
- **Dotenv** –¥–ª—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ .env —Ñ–∞–π–ª
- **Guzzle HTTP** –¥–ª—è HTTP –∑–∞–ø–∏—Ç—ñ–≤
- **Monolog** –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è** –≤—Ö—ñ–¥–Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
- **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫** –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º –ª–æ–≥—É–≤–∞–Ω–Ω—è–º
- **–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è** —Ç–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
- **–¢–µ—Å—Ç–æ–≤–∏–π —Ä–µ–∂–∏–º** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π fallback –Ω–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ–π–Ω—ñ –¥–∞–Ω—ñ

## –õ–æ–≥—É–≤–∞–Ω–Ω—è

–õ–æ–≥–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó `logs/app.log` —Ç–∞ –≤–∫–ª—é—á–∞—é—Ç—å:

- –£—Å–ø—ñ—à–Ω—ñ –∑–∞–ø–∏—Ç–∏ –¥–æ API
- –ü–æ–º–∏–ª–∫–∏ –∑–∞–ø–∏—Ç—ñ–≤
- –ü–æ–º–∏–ª–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
- –°–∏—Å—Ç–µ–º–Ω—ñ –ø–æ–º–∏–ª–∫–∏

## API Response Format

### –£—Å–ø—ñ—à–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å

```json
{
  "success": true,
  "data": {
    "city": "Kyiv",
    "country": "UA",
    "temperature": 15.5,
    "feels_like": 14.2,
    "humidity": 65,
    "pressure": 1013.25,
    "wind_speed": 3.2,
    "description": "clear sky",
    "icon": "01d",
    "timestamp": 1703123456,
    "formatted_time": "2023-12-21 15:30:56"
  },
  "timestamp": 1703123456,
  "formatted_time": "2023-12-21 15:30:56"
}
```

### –ü–æ–º–∏–ª–∫–∞

```json
{
  "success": false,
  "error": "City parameter is required",
  "timestamp": 1703123456,
  "formatted_time": "2023-12-21 15:30:56"
}
```
